# QRコード長文転送システム

## プロジェクト概要
QRコードを使用してネットワーク接続なしに長文テキストを転送するWebアプリケーション。完全にクライアントサイドで動作し、サーバー不要。GitHub Pagesで公開可能。

## 技術スタック
- 純粋なHTML/CSS/JavaScript（フレームワーク不使用）
- 外部ライブラリはCDN経由で読み込み
  - qrcode.js：QRコード生成
  - jsQR：QRコード読み取り
  - js-sha256：ハッシュ計算
  - crc-32：CRC計算

## プロジェクト構成
```
qrstreamer/
├── index.html        # トップページ（送信・受信の選択）
├── sender.html       # 送信側アプリ（PC向け）
├── receiver.html     # 受信側アプリ（スマートフォン向け）
├── js/              # JavaScriptファイル
│   ├── sender.js    # 送信側ロジック
│   ├── receiver.js  # 受信側ロジック
│   └── common.js    # 共通処理
├── css/             # スタイルシート
│   └── style.css    # 共通スタイル
└── CLAUDE.md        # このファイル
```

## 実装方針
- HTML/CSS/JSを適切に分離
- GitHub Pagesでの公開を前提とした構成
- エラーハンドリングは最小限（個人利用想定）
- 可読性とメイン処理の理解しやすさを重視

## QRコードフォーマット
### ヘッダーQRコード
```
HDR|v1|total:20|size:5234|hash:a1b2c3d4e5f6|enc:UTF8
```

### データQRコード
```
DAT|seq:1|data:実際のデータ|crc:12345678
```

## 送信側の主要処理
1. テキストをUTF-8エンコード
2. 適切なサイズに分割
3. ヘッダーとデータQRコードを生成
4. 設定された間隔で順次表示（無限ループ）
5. 新規送信：現在の送信を停止し、別のテキストで新しい送信を開始

## 受信側の主要処理
1. カメラでQRコード連続スキャン
2. ヘッダー情報から総フレーム数を把握
3. 受信済みフレームを管理
4. 全フレーム受信後にデータ復元・検証

## 開発時の注意
- getUserMediaはHTTPS環境が必要（ローカル開発時は`file://`でも可）
- モバイルブラウザでのカメラ権限に注意
- QRコード表示サイズは画面に合わせて調整

## UI/UXデザイン思想

### 基本理念
- **シンプルで機能的**: 複雑なアプリよりシンプルで機能的を重視
- **過不足のない美しさ**: 初めてでも直感で使いやすい、過不足のない美しいUIデザイン
- **フラットデザイン**: シャドウ、グラデーション、ホバー効果は不要

### 技術的詳細の隠蔽
- ユーザーは技術的な理由を知らなくて良い
- 「ヘッダー」「データ」「フレーム」という概念をユーザーに露出させない
- 表示されたガイダンスに従うだけで正しい結果になるよう設計

### 自然な操作誘導
- ユーザーが何も考えずに操作して、結果的に正しい順序になる
- 最初にヘッダーを読み取る必要性を自然に誘導（待ち時間ゼロ）
- 送信側と受信側の協調による効率的フロー

### 情報の最適化
- 視覚的要素で十分伝わる内容は文字で繰り返さない
- プログレスバー「3/5 ■■■□□」で十分な情報は冗長なテキスト不要
- 「○個目を読み取りました！あと○個です」→削除

### 混乱要因の排除
- 意味のない操作や表示は完全に削除
- テキスト入力時の自動QRプレビューは混乱を招くため削除
- 各ステップの意図と結果が明確になるよう設計

### 実装における美学
- 必要なタイミングでのみ要素を表示
- エラーメッセージの適切なクリア処理
- 状態変化に応じたUI切り替えで自然な流れを実現